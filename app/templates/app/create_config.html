{% extends 'app/base.html' %}
{% block content %}

<div class="container-fluid">
    <div  id="row-in_createconfig1" class="row ">
        <div class="col-md-4 ">
            <form id = "form_key1" action = "{% url 'key' %}" method="POST" class="post-form d-flex justify-content-start" >{% csrf_token %}
                <div class="col-6 ">
                    <div><label for="id_input_power">Входная мощность:</label></div>
                    <div>{{keys_form.input_power}}</div>

                    <div><label for="id_input_power_first">Входная мощность начальная:</label></div>
                    <div>{{keys_form.input_power_first}}</div>

                    <div><label for="id_input_power_last">Входная мощность конечная:</label></div>
                    <div>{{keys_form.input_power_last}}</div>
                    <button id = "btn1" type="submit" class="save btn btn-primary">Добавить ключ</button>
                </div>
                <div class="col-6 ">
                    <div><label for="id_namber_of_points_for_smoothing">Количество точек сглаживания:</label></div>
                    <div>{{keys_form.namber_of_points_for_smoothing}}</div>

                    <div><label for="id_width_filter">Ширина фильтра ПЧ:</label></div>
                    <div>{{keys_form.width_filter}}</div>
                    
                    <div><label for="id_namber_of_points_for_averaging">Количество точек:</label></div>
                    <div>{{keys_form.namber_of_points_for_averaging}}</div>
                </div>
            </form>
        </div>
        <div class="col-md-8 d-flex justify-content-around">
            <div class="col-3">
                <form  id ="form_table_meas"  action = "{% url 'create_measure' %}" method="POST" class="post-form">{% csrf_token %}
                    <div>
                        <label for="id_name">Тип измерения:</label>
                    </div>
                    <div>
                        <input type="text" name="name" maxlength="50" required="" id="id_name">
                    </div>
                    <div>
                        <label for="id_key">Ключи:</label>
                    </div>
                    <div>
                        {{measuretype_form.key}}
                    </div>
                    <div>
                        <button id = "btn1" type="submit" class="save btn btn-primary">Добавить тип</button>
                        {% comment %} <div><a href="#!">Список ключей</a> </div> {% endcomment %}
                    </div>
                </form>
            </div>
            <div class="col-md-9">
                <table class="table table-bordered">
                    <thead class="thead-light">
                        <tr>
                            <th>Тип:</th>
                            <th>Ключи: <a href="{% url 'keys_list' %}">Полный список созданных ключей</a></th>
                            <th>Действия:</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for m in measure_type_data %}
                            <tr>
                                <td>
                                    <div>{{m}}</div> 
                                </td>
                                <td>
                                    {% comment %} {% for k in key_data%}
                                        <div>{{k}}</div>
                                    {% endfor %} {% endcomment %}
                                    {{m.key}}
                                </td>
                                <td>
                                    <div><a href={% url 'ed_key' m.key.id %} class="btn btn-primary btn-sm">Изменить ключ</a></div> 
                                    {% comment %} <a id= "del" href={% url 'remove_key' m.key.id %} class="btn btn-danger btn-sm">Удалить ключ</a> {% endcomment %}
                                    <a id= "del" href={% url 'remove_measure_type' m.id %} class="btn btn-danger btn-sm">Удалить тип</a>    
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="row1" class="row">
        <form id = "form_createmea1" method="POST" class="post-form d-flex justify-content-around">{% csrf_token %}
            <div class="col-md-4">
                <label class="d-flex flex-wrap align-content-start" for="id_name">Имя SSI:</label>
                <input type="text" name="name" maxlength="50" required="" id="id_name" placeholder="SSI_1">                                    
                <label for="id_input_frequency">Входная частота,ГГц:</label>
                <input type="number" name="input_frequency" required="" id="id_input_frequency" placeholder="28" step="0.001">
                <label for="id_pay_load">ПН:</label>
                <div id='div1'>{{form.pay_load}} </div>
                <button id = "btn1" type="submit" class="save btn btn-primary">Добавить SSI</button>  
            </div>       
            <div class="col-md-4">
                <label for="id_band_frequency">Полоса частот,МГц:</label>
                <input type="number" name="band_frequency" required="" id="id_band_frequency" placeholder="34" step="0.001">                
                <label for="id_output_frequency">Выходная частота,ГГц:</label>
                <input type="number" name="output_frequency" required="" id="id_output_frequency" placeholder="78" step="0.001">
            </div>
            <div class="col-md-2">
                <label for="id_available_meas">Тип измерения:</label>
                <div id='div1'>{{ form.available_meas}}</div>
            </div>            
        </form>
        <div class="col-md-7 " >    
            <table class="table table-bordered">
                <thead class="thead-light"> 
                    <tr>
                        <th>Имя SSI</th>
                        <th>Входная частота, ГГц</th>
                        <th>Выходная частота, ГГц</th>
                        <th>Полоса частот, МГц</th>
                        <th>Выбранные измерения</th>
                        <th>Частотный диапазон</th>
                        <th>ПН</th>
                        <th>КА</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in Freqmodel %}
                        <tr>
                            <td>{{i.ssi_element.name}}</td>
                            <td>{{i.ssi_element.input_frequency}}</td>
                            <td>{{i.ssi_element.output_frequency}}</td>
                            <td>{{i.ssi_element.band_frequency}}</td>
                            <td>
                                {% for meas in i.ssi_element.available_meas.all %}
                                    {{meas.name}}
                                {% endfor %}
                            </td>
                            <td>{{i.name}}</td>
                            <td>{{i.ssi_element.pay_load.name}}</td>
                            <td>{{i.ssi_element.pay_load.spacecraft}}</td>
                            <td >
                                <div><a href={% url 'edit_ssi' i.ssi_element.id %} class="btn btn-primary btn-sm">Изменить SSI</a></div> 
                                <a id="del" href={% url 'ssi_remove_ssilist' i.ssi_element.id %} class="btn btn-danger btn-sm">Удалить SSI</a>
                            </td> 
                            {% comment %} Доступ через SSI к SSI 
                            <td>{{s.input_frequency}}</td>
                            <td>{{s.output_frequency}}</td>
                            <td>{{s.band_frequency}}</td>                                      
                            <td>
                                {% for meas in s.available_meas.all %}
                                    {{meas.name}}
                                {% endfor %}
                            </td>
                            <td>{{s.freqrange.all.get}}</td>  
                            <td><a href={% url 'ssi_remove_ssilist' s.id %} class="btn btn-danger">Delete</a></td> {% endcomment %}
                        </tr>
                    {% endfor %}
                </tbody> 
            </table>         
        </div>
    </div>
</div>
{% endblock content %}